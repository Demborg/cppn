(window.webpackJsonpcppn=window.webpackJsonpcppn||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(36)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){e.exports=n.p+"static/media/Roboto-Regular.f36638c2.ttf"},function(e,t,n){e.exports=n.p+"static/media/AlfaSlabOne-Regular.7676beb2.ttf"},function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(14),o=n.n(r),c=(n(21),n(15)),s=n(7),l=n(8),d=n(10),u=n(9),m=n(11),h=(n(22),n(2)),p="https://www.tensorflow.org/js",v="https://en.wikipedia.org/wiki/Compositional_pattern-producing_network",f=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.artist,n=e.year,a=e.name,r=e.material;return i.a.createElement("div",{className:"card"},i.a.createElement("span",{className:"artist"},t)," ",i.a.createElement("br",null),i.a.createElement("span",{className:"name"},a)," ",i.a.createElement("span",{className:"year"},n)," ",i.a.createElement("br",null),i.a.createElement("span",{className:"material"},r))}}]),t}(i.a.Component),g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleOrientaion=function(e){var t=e.beta/180,a=e.gamma/90;n.setState({latent:[t,a]},n.updateCanvas),console.log("latent = [".concat(t,";").concat(a,"]"))},n.requestPermission=function(){DeviceMotionEvent.requestPermission().then(function(e){"granted"===e?window.addEventListener("deviceorientation",n.handleOrientaion):console.error("request was not granted :c")})},n.handleClick=function(e){var t=e.currentTarget.getBoundingClientRect(),a=e.nativeEvent.offsetX/t.width*2-1,i=e.nativeEvent.offsetY/t.height*2-1;n.setState({latent:[a,i]},n.updateCanvas),console.log("latent = [".concat(a,";").concat(i,"]"))},n.state={model:null,latent:[-1,-1]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"createModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;console.time("createModel");var a=Object(h.c)();a.add(h.b.dense({inputShape:[e],units:n,activation:"tanh",kernelInitializer:h.a.randomNormal({stddev:1})}));for(var i=0;i<t-2;i++)a.add(h.b.dense({units:n,activation:"tanh",kernelInitializer:h.a.randomNormal({stddev:1})}));return a.add(h.b.dense({units:4,activation:"sigmoid",kernelInitializer:h.a.randomNormal({stddev:1})})),console.timeEnd("createModel"),a}},{key:"createInput",value:function(e,t,n,a){console.time("createInput");for(var i=[],r=0;r<t;r++)for(var o=a*(2*r/t-1),s=0;s<e;s++){var l=a*(2*s/e-1);i.push([l,o,Math.sqrt(l*l+o*o)].concat(Object(c.a)(n.map(function(e){return a*e}))))}return console.timeEnd("createInput"),Object(h.d)(i)}},{key:"updateCanvas",value:function(){var e=this.props,t=e.width,n=e.height,a=e.scale,i=this.state,r=i.model,o=i.latent,c=this.refs.canvas.getContext("2d"),s=c.createImageData(t,n),l=this.createInput(t,n,o,a);console.time("predict");var d=r.predict(l,{batchSize:2048}).arraySync();console.timeEnd("predict"),console.time("paint");for(var u=0;u<d.length;u++){for(var m=0;m<4;m++)s.data[4*u+m]=Math.round(255*d[u][m]);s.data[4*u+3]=255}c.putImageData(s,0,0),console.timeEnd("paint")}},{key:"componentDidMount",value:function(){var e=this.props,t=e.num_layers,n=e.hidden,a=this.createModel(5,t,n);this.setState({model:a},this.updateCanvas),window.addEventListener("deviceorientation",this.handleOrientaion,!0)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height,onMouseMove:this.handleClick,onClick:this.requestPermission}),i.a.createElement("br",null),i.a.createElement(f,{artist:"Axel Demborg",year:"2019",material:"Digital render, programming, mixed languages",name:"Art of a Machine"}))}}]),t}(i.a.Component);var w=function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"CPPN.js"),i.a.createElement("p",null,"Playing with ",i.a.createElement("a",{href:v}," CPPNs ")," and ",i.a.createElement("a",{href:p},"tf.js")," during hackathon"),i.a.createElement(g,{width:256,height:256,scale:8,num_layers:6,units_per_layer:8}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(34),n(35);o.a.render(i.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[16,1,2]]]);
//# sourceMappingURL=main.75ede552.chunk.js.map