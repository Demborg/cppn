(window.webpackJsonpcppn=window.webpackJsonpcppn||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(36)},,,,,function(e,t,a){},function(e,t,a){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){e.exports=a.p+"static/media/Roboto-Regular.f36638c2.ttf"},function(e,t,a){e.exports=a.p+"static/media/AlfaSlabOne-Regular.7676beb2.ttf"},function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(14),o=a.n(i),c=(a(21),a(15)),l=a(7),s=a(8),u=a(10),d=a(9),m=a(11),h=(a(22),a(2)),p="https://www.tensorflow.org/js",v="https://en.wikipedia.org/wiki/Compositional_pattern-producing_network",f=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.artist,a=e.year,n=e.name,i=e.material;return r.a.createElement("div",{className:"card"},r.a.createElement("span",{className:"artist"},t)," ",r.a.createElement("br",null),r.a.createElement("span",{className:"name"},n)," ",r.a.createElement("span",{className:"year"},a)," ",r.a.createElement("br",null),r.a.createElement("span",{className:"material"},i))}}]),t}(r.a.Component),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOrientaion=function(e){var t=e.beta/180,n=e.gamma/90;a.setState({latent:[t,n]},a.updateCanvas),console.log("latent = [".concat(t,";").concat(n,"]"))},a.handleClick=function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.nativeEvent.offsetX/t.width*2-1,r=e.nativeEvent.offsetY/t.height*2-1;a.setState({latent:[n,r]},a.updateCanvas),console.log("latent = [".concat(n,";").concat(r,"]"))},a.state={model:null,latent:[-1,-1]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"createModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;console.time("createModel");var n=Object(h.c)();n.add(h.b.dense({inputShape:[e],units:a,activation:"tanh",kernelInitializer:h.a.randomNormal({stddev:1})}));for(var r=0;r<t-2;r++)n.add(h.b.dense({units:a,activation:"tanh",kernelInitializer:h.a.randomNormal({stddev:1})}));return n.add(h.b.dense({units:4,activation:"sigmoid",kernelInitializer:h.a.randomNormal({stddev:1})})),console.timeEnd("createModel"),n}},{key:"createInput",value:function(e,t,a,n){console.time("createInput");for(var r=[],i=0;i<t;i++)for(var o=n*(2*i/t-1),l=0;l<e;l++){var s=n*(2*l/e-1);r.push([s,o,Math.sqrt(s*s+o*o)].concat(Object(c.a)(a.map(function(e){return n*e}))))}return console.timeEnd("createInput"),Object(h.d)(r)}},{key:"updateCanvas",value:function(){var e=this.props,t=e.width,a=e.height,n=e.scale,r=this.state,i=r.model,o=r.latent,c=this.refs.canvas.getContext("2d"),l=c.createImageData(t,a),s=this.createInput(t,a,o,n);console.time("predict");var u=i.predict(s,{batchSize:2048}).arraySync();console.timeEnd("predict"),console.time("paint");for(var d=0;d<u.length;d++){for(var m=0;m<4;m++)l.data[4*d+m]=Math.round(255*u[d][m]);l.data[4*d+3]=255}c.putImageData(l,0,0),console.timeEnd("paint")}},{key:"componentDidMount",value:function(){var e=this.props,t=e.num_layers,a=e.hidden,n=this.createModel(5,t,a);this.setState({model:n},this.updateCanvas),window.addEventListener("deviceorientation",this.handleOrientaion,!0)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height,onMouseMove:DeviceMotionEvent.requestPermission,onClick:this.requestPermission}),r.a.createElement("br",null),r.a.createElement(f,{artist:"Axel Demborg",year:"2019",material:"Digital render, programming, mixed languages",name:"Art of a Machine"}))}}]),t}(r.a.Component);var b=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"CPPN.js"),r.a.createElement("p",null,"Playing with ",r.a.createElement("a",{href:v}," CPPNs ")," and ",r.a.createElement("a",{href:p},"tf.js")," during hackathon"),r.a.createElement(g,{width:256,height:256,scale:8,num_layers:6,units_per_layer:8}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(34),a(35);o.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[16,1,2]]]);
//# sourceMappingURL=main.d44ea881.chunk.js.map